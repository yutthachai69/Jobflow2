# 1. ‡πÉ‡∏ä‡πâ Node v20
FROM node:20

# 2. ‡∏ï‡∏±‡πâ‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
WORKDIR /app

# 3. ‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å! ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏Å‡πà‡∏≠‡∏ô install)
COPY . .

# 4. ‡∏•‡∏á‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°
RUN npm install

# 5. ‡∏™‡∏£‡πâ‡∏≤‡∏á Prisma Client
RUN npx prisma generate

# ---------------------------------------------------
# üëá ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡∏£‡πå (‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏¢‡πÑ‡∏õ): ‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏õ‡∏•‡∏≠‡∏°‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Build ‡∏ú‡πà‡∏≤‡∏ô
ENV DATABASE_URL="postgresql://johndoe:randompassword@localhost:5432/mydb?schema=public"
# ---------------------------------------------------

# 6. ‡∏™‡∏£‡πâ‡∏≤‡∏á Build (‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ‡∏ú‡πà‡∏≤‡∏ô‡∏ä‡∏±‡∏ß‡∏£‡πå 100%)
RUN npm run build

# 7. ‡πÄ‡∏õ‡∏¥‡∏î‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
EXPOSE 3000
CMD ["npm", "start"]